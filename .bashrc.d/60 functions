# web search shortcuts

g() {
    local IFS='+';
    browser "https://google.com/search?q=$*";
}

w() {
    local IFS='+';
    browser "https://de.wikipedia.org/w/index.php?title=Spezial:Suche&search=$*";
}

l() {
    local IFS='+';
    browser "http://dict.leo.org/ende/?lang=de&search=$*";
}

browser() {
    local browser="";
    if [[ -v DISPLAY ]]; then
        # we’re in an X server
        browser="links -driver X"
    elif [[ ! -v TMUX ]]; then
        # we’re in a TTY
        browser="links -driver fb"
    else
        # we’re in a regular terminal
        browser="SSL_CERT_FILE=/etc/ssl/certs/ca-certificates.crt lynx -cookies"
    fi
    local cmd="$browser \"$1\""
    eval "$cmd"
}

# watch WLAN

ww() {
    tmux set-window-option monitor-content AUTHENTICATED > /dev/null
    watch wpa_cli status
    tmux set-window-option monitor-content 2> /dev/null
}

# battery life

batlife() {
    echo $(bc <<< "scale = 2; 100 * $(</sys/class/power_supply/BAT0/charge_now) / $(</sys/class/power_supply/BAT0/charge_full)")%
    upower --show-info /org/freedesktop/UPower/devices/battery_BAT0 | grep --color=no "time to \(full\|empty\)" &&  echo "     (more info with upower --dump)" || echo "     (battery full, more info with upower --dump)"
}

# ssh-add all keys

sshadd() {
    privs=()
    for pub in ~/.ssh/*.pub; do
        privs+=("${pub%.pub}")
    done
    ssh-add "${privs[@]}"
}
